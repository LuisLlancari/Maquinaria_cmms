{% extends "core/base.html" %} 
{% block titulo %} Reporte Tractor {% endblock titulo %} 

{% block contenido %}
<div class="container">
    <div class="row">
        {% for reporte in reportes %}
        <div class="col-md-4">
            <div class="card mb-4" style="background-color: rgb(255, 255, 255);">
                <div class="card-body">
                    <h6 class="card-title text-center" id="h6">Reporte Tractor {{ forloop.counter }}</h6>
                    <div class="report-info">
                        <p class="mt-2 mb-0"><span class="info-label">Usuario: </span> {{ user.username }}</p>
                        <p class="mt-2 mb-0"><span class="info-label">Programacion: </span> 100A-{{ reporte.idprogramacion }}</p>
                        <p class="mt-2 mb-0"><span class="info-label">Horometro Inicial:</span> {{ reporte.horometroinicial }}</p>
                        <p class="mt-2 mb-0"><span class="info-label">Horometro Final:</span> {{ reporte.horometrofinal }}</p>
                        <p class="mt-2 mb-0"><span class="info-label">Correlativo:</span> {{ reporte.correlativo }}</p>
                    </div>
                    <button class="btn btn-primary mt-3 btnmodal" data-bs-toggle="modal" data-bs-target="#exampleModal" style="width: 100%;">Finalizar Reporte</button>
                </div>
            </div>
        </div>
        {% if forloop.counter|divisibleby:3 and not forloop.last %}
        </div>
        <div class="row">
        {% endif %}
        {% endfor %}
    </div>
</div>

<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="Programacion">Programacion:</label>
                    <input type="text" class="form-control" id="Programacion" placeholder="Programacion">
                </div>
                <div class="form-group">
                    <label for="horometroinicial">Horometro Inicial:</label>
                    <input type="text" class="form-control" id="horometroinicial" placeholder="Horometro Inicial">
                </div>
                <div class="form-group">
                    <label for="horometrofinal">Horometro Final:</label>
                    <input type="text" class="form-control" id="horometrofinal" placeholder="Horometro Final">
                </div>
                <div class="form-group">
                    <label for="correlativo">Correlativo:</label>
                    <input type="text" class="form-control" id="correlativo" placeholder="Correlativo">
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" style="width: 100%;" data-bs-dismiss="modal">Cerrar</button>
                <button type="button" class="btn btn-primary" style="width: 100%;">Confirmar Reporte</button>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        var editButtons = document.querySelectorAll(".btnmodal");
        editButtons.forEach(function (button) {
            button.addEventListener("click", function () {
                var reportenum = this.parentNode.querySelector("h6").textContent;
                document.getElementById("exampleModalLabel").textContent = reportenum;
                document.getElementById("modalContent").textContent = reportenum;
            });
        });
    });
</script>
{% endblock %}
